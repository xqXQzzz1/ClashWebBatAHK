(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[507],{77098:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ae}});var n=r(34699),o=r(96156),i=r(85893),c=r(86010),s=r(67294),a=r(64478),l=r(69834),u=(r(41539),r(88674),r(39714),r(23123),r(97943));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v,g,h,p="/logs",b=new TextDecoder("utf-8"),y=!1,j=!1,O="";function m(e,t){var r;try{r=JSON.parse(e)}catch(t){console.log("JSON.parse error",JSON.parse(e))}var n=new Date,o=n.toLocaleString("zh-Hans");r.time=o,r.id=+n-0+Math.floor(65536*(1+Math.random())).toString(16),r.even=y=!y,t(r)}function w(e,t){return e.read().then((function(r){for(var n=r.done,o=r.value,i=b.decode(o,{stream:!n}),c=(O+=i).split("\n"),s=c[c.length-1],a=0;a<c.length-1;a++)m(c[a],t);return n?(m(s,t),O="",console.log("GET /logs streaming done"),void(j=!1)):(O=s,w(e,t))}))}function x(e,t){if(!j&&1!==h){h=1;var r=(0,u.P)(e,p),n=new WebSocket(r);n.addEventListener("error",(function(){return h=3})),n.addEventListener("close",(function(r){h=3,function(e,t){if(!g||v.baseURL===e.baseURL&&v.secret===e.secret&&v.logLevel===e.logLevel){if(j)return}else g.abort();j=!0,v=d({},e);var r=(g=new AbortController).signal,n=(0,u.g)(e),o=n.url,i=n.init;fetch(o+p+"?level="+e.logLevel,d(d({},i),{},{signal:r})).then((function(e){w(e.body.getReader(),t)}),(function(e){j=!1,r.aborted||console.log("GET /logs error:",e.message)}))}(e,t)})),n.addEventListener("message",(function(e){m(e.data,t)}))}}var P=r(87462),S=r(6055),L=r(92669),k=r(49522),E=r(82569),N="_3rlaagQhmO",C="_1Y8l2FW3db",D="_3RhnPkHfE2",Z="o1S9cV4T0R",_="_3GIdCSyyS7",T="lUDfnPiNdD",R="PaFzglKCf5",z="_29b6nIu_GY",Y=r(80125),H=r(45697),I=r.n(H);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var J=(0,s.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,o=e.size,i=void 0===o?24:o,c=G(e,["color","size"]);return s.createElement("svg",U({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.createElement("circle",{cx:"11",cy:"11",r:"8"}),s.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));J.propTypes={color:I().string,size:I().oneOfType([I().string,I().number])},J.displayName="Search";var Q=J,$="_2QPZldYe9U",B="_2PCUI90lIf",K="xOYTLnYrng",M="_1JKQs_Qawx",W="_2km92h_dfH";var A=function(e){var t=e.dispatch,r=e.searchText,o=e.updateSearchText,c=(0,s.useState)(r),a=(0,n.Z)(c,2),l=a[0],u=a[1],f=(0,s.useCallback)((function(e){t(o(e))}),[t,o]),d=(0,s.useMemo)((function(){return(0,Y.Z)(f,300)}),[f]);return(0,i.jsx)("div",{className:$,children:(0,i.jsxs)("div",{className:B,children:[(0,i.jsx)("div",{className:K,children:(0,i.jsx)("input",{type:"text",value:l,onChange:function(e){u(e.target.value),d(e.target.value)},className:M})}),(0,i.jsx)("div",{className:W,children:(0,i.jsx)(Q,{size:20})})]})})},F=r(85295),V=(0,F.$j)((function(e){return{searchText:(0,k.Rv)(e),updateSearchText:k.AR}}))(A),X=r(4541);function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=s.useCallback,re=s.memo,ne=s.useEffect,oe={debug:"none",info:"#454545",warning:"#b99105",error:"#c11c1c"};function ie(e){var t=e.time,r=e.even,n=e.payload,o=e.type,s=(0,c.Z)({even:r},T);return(0,i.jsx)("div",{className:s,children:(0,i.jsxs)("div",{className:N,children:[(0,i.jsx)("div",{className:D,children:t}),(0,i.jsx)("div",{className:C,style:{backgroundColor:oe[o]},children:o}),(0,i.jsx)("div",{className:Z,children:n})]})})}function ce(e,t){return t[e].id}var se=re((function(e){var t=e.index,r=e.style,n=e.data[t];return(0,i.jsx)("div",{style:r,children:(0,i.jsx)(ie,ee({},n))})}),l.wy);var ae=(0,F.$j)((function(e){return{logs:(0,k.Xs)(e),logLevel:(0,L.ZO)(e),apiConfig:(0,S.Y$)(e)}}))((function(e){var t=e.dispatch,r=e.logLevel,o=e.apiConfig,c=e.logs,s=te((function(e){t((0,k.TH)(e))}),[t]);ne((function(){x(ee(ee({},o),{},{logLevel:r}),s)}),[o,r,s]);var u=(0,P.Z)(),f=(0,n.Z)(u,2),d=f[0],v=f[1],g=(0,a.$)().t;return(0,i.jsxs)("div",{children:[(0,i.jsx)(E.Z,{title:g("Logs")}),(0,i.jsx)(V,{}),(0,i.jsx)("div",{ref:d,style:{paddingBottom:30},children:0===c.length?(0,i.jsxs)("div",{className:R,style:{height:v-30},children:[(0,i.jsx)("div",{className:z,children:(0,i.jsx)(X.Z,{width:200,height:200})}),(0,i.jsx)("div",{children:g("no_logs")})]}):(0,i.jsx)("div",{className:_,children:(0,i.jsx)(l.t7,{height:v-30,width:"100%",itemCount:c.length,itemSize:80,itemData:c,itemKey:ce,children:se})})})]})}))},87462:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(34699),o=r(67294),i=o.useState,c=o.useRef,s=o.useCallback,a=o.useLayoutEffect;function l(){var e=c(null),t=i(200),r=(0,n.Z)(t,2),o=r[0],l=r[1],u=s((function(){var t=e.current.getBoundingClientRect().top;l(window.innerHeight-t)}),[]);return a((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[u]),[e,o]}}}]);
//# sourceMappingURL=logs.5da61af4702357a99efe.js.map