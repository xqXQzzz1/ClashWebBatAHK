(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[641],{18002:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return un}});r(21249);var t=r(34699),i=r(85893),s=r(86756),a=r(67294),o=r(34588),c=r(64478),l=r(6055),u=r(71218),d=r(25904),p=r(82569),f=r(86010),x=r(83253),h=r.n(x),v=r(93621),m="_25Hedjekvk",j="_1tfU5GSa-_",y="_2VMuy-HWwC",C=a.useMemo;function g(e){var n=e.isOpen,r=e.onRequestClose,t=e.children,s=C((function(){return{base:(0,f.Z)(v.Z.content,j),afterOpen:y,beforeClose:""}}),[]);return(0,i.jsx)(h(),{isOpen:n,onRequestClose:r,className:s,overlayClassName:(0,f.Z)(v.Z.overlay,m),children:t})}var b=r(51525),k=r(85295);function w(e){var n=e.color,r=void 0===n?"currentColor":n,t=e.size,s=void 0===t?24:t;return(0,i.jsxs)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:s,height:s,stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("path",{d:"M2 6h9M18.5 6H22"}),(0,i.jsx)("circle",{cx:"16",cy:"6",r:"2"}),(0,i.jsx)("path",{d:"M22 18h-9M6 18H2"}),(0,i.jsx)("circle",{r:"2",transform:"matrix(-1 0 0 1 8 18)"})]})}var _="_1NNIVhRL-n";function N(e){var n=e.children;return(0,i.jsx)("div",{className:_,children:n})}var Z=a.useRef,S=a.useEffect;function O(e){var n=e.onClickPrimaryButton,r=e.onClickSecondaryButton,t=Z(null),s=Z(null);S((function(){t.current.focus()}),[]);return(0,i.jsxs)("div",{onKeyDown:function(e){39===e.keyCode?s.current.focus():37===e.keyCode&&t.current.focus()},children:[(0,i.jsx)("h2",{children:"Close Connections?"}),(0,i.jsx)("p",{children:'Click "Yes" to close those connections that are still using the old selected proxy in this group'}),(0,i.jsx)("div",{style:{height:30}}),(0,i.jsxs)(N,{children:[(0,i.jsx)(d.Z,{onClick:n,ref:t,children:"Yes"}),(0,i.jsx)("div",{style:{width:20}}),(0,i.jsx)(d.Z,{onClick:r,ref:s,children:"No"})]})]})}var P="_2adLhYLrrV",U="_1gc_yljm7w",L="_1N0wXB7TV7",A="_35E6rdJlPT",B=r(87757),M=r.n(B),D=(r(35666),r(92137)),R=r(27434),E="_2qbBB1Sojw",T="_1iuVspxe4f",V="_2CN_S7POBQ",$="_3504uhlYv5",I="_3Vynmp3NK4",W=r(17132);function q(e){var n=e.name,r=e.type,t=e.toggle,s=e.isOpen,o=e.qty,c=a.useCallback((function(e){e.preventDefault(),"Enter"!==e.key&&" "!==e.key||t()}),[t]);return(0,i.jsxs)("div",{className:E,onClick:t,style:{cursor:"pointer"},tabIndex:0,onKeyDown:c,role:"button",children:[(0,i.jsx)("div",{children:(0,i.jsx)(W.$,{name:n,type:r})}),"number"==typeof o?(0,i.jsx)("span",{className:I,children:o}):null,(0,i.jsx)(d.Z,{kind:"minimal",onClick:t,className:$,title:"Toggle collapsible section",children:(0,i.jsx)("span",{className:(0,f.Z)(T,{[V]:s}),children:(0,i.jsx)(R.Z,{size:20})})})]})}r(57327),r(82772),r(2707),r(23123),r(73210);var F=r(87329),H=r(2804),Y=a.useMemo;var z=function(e,n){if(e&&"number"==typeof e.number&&e.number>0)return e.number;var r=n&&n.type;return r&&u.SJ.indexOf(r)>-1?-1:999999},G={Natural:function(e){return e},LatencyAsc:function(e,n,r){return e.sort((function(e,t){return z(n[e],r&&r[e])-z(n[t],r&&r[t])}))},LatencyDesc:function(e,n,r){return e.sort((function(e,t){var i=z(n[e],r&&r[e]);return z(n[t],r&&r[t])-i}))},NameAsc:function(e){return e.sort()},NameDesc:function(e){return e.sort((function(e,n){return e>n?-1:e<n?1:0}))}};function K(e,n,r,i,s){var a=(0,H.FV)(u.RE),o=(0,t.Z)(a,1)[0];return Y((function(){return function(e,n,r,t,i,s){var a=(0,F.Z)(e);return r&&(a=function(e,n){return e.filter((function(e){var r=n[e];return void 0===r||0!==r.number}))}(e,n)),"string"==typeof t&&""!==t&&(a=function(e,n){var r=n.toLowerCase().split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e}));return 0===r.length?e:e.filter((function(e){for(var n=0;n<r.length;n++){var t=r[n];if(e.toLowerCase().indexOf(t)>-1)return!0}return!1}))}(a,t)),G[i](a,n,s)}(e,n,r,o,i,s)}),[e,n,r,o,i,s])}var X={header:"v5oNKUwcTc",zapWrapper:"_2fR1H0ysyY"},J=13,Q="_5-kOJyYfSn",ee="MbWebw2VH4",ne="_2dlAYgAIKi",re="_3rB1UgDAL6",te="nnjdzHZySt",ie="_2E11-huRp7",se="_2Eys6UMXCm",ae="_2rRGWVNOYC",oe="_1GlyjMFCSf";function ce(e){var n=e.number,r=e.color;return(0,i.jsx)("span",{className:oe,style:{color:r},children:(0,i.jsxs)("span",{children:[n," ms"]})})}var le=a.useMemo,ue="#67c23a",de="#d4b75c",pe="#e67f3c",fe="#909399";function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.number;return 0===n?fe:n<200?ue:n<400?de:"number"==typeof n?pe:fe}var he=function(e,n){var r=n.name,t=(0,u.yi)(e),i=(0,u.sj)(e);return{proxy:t[r],latency:i[r]}},ve=(0,k.$j)(he)((function(e){var n,r=e.now,t=e.name,s=e.proxy,o=e.latency,c=e.isSelectable,l=e.onClick,u=le((function(){return xe(o)}),[o]),d=a.useCallback((function(){c&&l&&l(t)}),[t,l,c]),p=a.useCallback((function(e){e.keyCode===J&&d()}),[d]),x=le((function(){return(0,f.Z)(Q,{[ee]:r,[ne]:o&&o.error,[re]:c})}),[c,r,o]);return(0,i.jsxs)("div",{tabIndex:0,className:x,onClick:d,onKeyDown:p,role:c?"menuitem":"",children:[(0,i.jsx)("div",{className:se,children:t}),(0,i.jsxs)("div",{className:ie,children:[(0,i.jsx)("span",{className:te,style:{opacity:r?.6:.2},children:(n=s.type,"Shadowsocks"===n?"SS":n)}),o&&o.number?(0,i.jsx)(ce,{number:o.number,color:u}):null]})]})})),me=(0,k.$j)(he)((function(e){var n=e.now,r=e.name,t=e.proxy,s=e.latency,o=e.isSelectable,c=e.onClick,l=le((function(){return function(e,n){return u.SJ.indexOf(n)>-1?"linear-gradient(135deg, white 15%, #999 15% 30%, white 30% 45%, #999 45% 60%, white 60% 75%, #999 75% 90%, white 90% 100%)":xe(e)}(s,t.type)}),[s,t]),d=le((function(){var e=r;return s&&"number"==typeof s.number&&(e+=" "+s.number+" ms"),e}),[r,s]),p=a.useCallback((function(){o&&c&&c(r)}),[r,c,o]),x=le((function(){return(0,f.Z)(ae,{[ee]:n,[re]:o})}),[o,n]),h=a.useCallback((function(e){e.keyCode===J&&p()}),[p]);return(0,i.jsx)("div",{title:d,className:x,style:{background:l},onClick:p,onKeyDown:h,role:o?"menuitem":""})})),je="_1pPZyUDtdp",ye="_6uXcWV1Myk";function Ce(e){var n=e.all,r=e.now,t=e.isSelectable,s=e.itemOnTapCallback,a=n;return(0,i.jsx)("div",{className:je,children:a.map((function(e){return(0,i.jsx)(ve,{onClick:s,isSelectable:t,name:e,now:e===r},e)}))})}function ge(e){var n=e.all,r=e.now,t=e.isSelectable,s=e.itemOnTapCallback;return(0,i.jsx)("div",{className:ye,children:n.map((function(e){return(0,i.jsx)(me,{onClick:s,isSelectable:t,name:e,now:e===r},e)}))})}var be=a.createElement,ke=a.useCallback,we=a.useMemo,_e=a.useState;function Ne(){return(0,i.jsx)("div",{className:X.zapWrapper,children:(0,i.jsx)(o.Z,{size:16})})}var Ze=(0,k.$j)((function(e,n){var r=n.name,t=n.delay,i=(0,u.yi)(e),s=(0,l.VR)(e),a=(0,l.S3)(e),o=(0,l.sU)(e),c=i[r];return{all:c.all,delay:t,hideUnavailableProxies:o,proxySortBy:a,proxies:i,type:c.type,now:c.now,isOpen:s["proxyGroup:"+r]}}))((function(e){var n=e.name,r=e.all,s=e.delay,a=e.hideUnavailableProxies,o=e.proxySortBy,c=e.proxies,l=e.type,p=e.now,f=e.isOpen,x=e.apiConfig,h=e.dispatch,v=K(r,s,a,o,c),m=we((function(){return"Selector"===l}),[l]),j=(0,k.WX)(),y=j.app.updateCollapsibleIsOpen,C=j.proxies.requestDelayForProxies,g=ke((function(){y("proxyGroup",n,!f)}),[f,y,n]),b=ke((function(e){m&&h((0,u.hU)(x,n,e))}),[x,h,n,m]),w=_e(!1),_=(0,t.Z)(w,2),N=_[0],Z=_[1],S=ke((0,D.Z)(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),e.prev=1,e.next=4,C(x,v);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:Z(!1);case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),[v,x,C]);return(0,i.jsxs)("div",{className:X.group,children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(q,{name:n,type:l,toggle:g,qty:v.length,isOpen:f}),(0,i.jsx)(d.Z,{title:"Test latency",kind:"minimal",onClick:S,isLoading:N,children:(0,i.jsx)(Ne,{})})]}),be(f?Ce:ge,{all:v,now:p,isSelectable:m,itemOnTapCallback:b})]})})),Se=r(70296),Oe=r(86178),Pe=r(88757),Ue=r(91033),Le=a.memo,Ae=a.useState,Be=a.useRef,Me=a.useEffect;var De={initialOpen:{height:"auto",transition:{duration:0}},open:function(e){return{height:e,opacity:1,visibility:"visible",transition:{duration:.3}}},closed:{height:0,opacity:0,visibility:"hidden",transition:{duration:.3}}},Re={open:{x:0},closed:{x:20}},Ee=Le((function(e){var n,r,s=e.children,a=e.isOpen,o=Pe.U.read().motion,c=(n=a,r=Be(),Me((function(){r.current=n}),[n]),r.current),l=function(){var e=Be(),n=Ae({height:0}),r=(0,t.Z)(n,2),i=r[0],s=r[1];return Me((function(){var n=new Ue.Z((function(e){var n=(0,t.Z)(e,1)[0];return s(n.contentRect)}));return e.current&&n.observe(e.current),function(){return n.disconnect()}}),[]),[e,i]}(),u=(0,t.Z)(l,2),d=u[0],p=u[1].height;return(0,i.jsx)("div",{children:(0,i.jsx)(o.div,{animate:a&&c===a?"initialOpen":a?"open":"closed",custom:p,variants:De,children:(0,i.jsx)(o.div,{variants:Re,ref:d,children:s})})})})),Te="_113att7Ifr",Ve="_26mH_RmGnl",$e="_2cXcxGEUNI",Ie="_2NjdAt9CvG",We=a.useState,qe=a.useCallback;var Fe={rest:{scale:1},pressed:{scale:.95}},He={rest:{rotate:0},hover:{rotate:360,transition:{duration:.3}}};function Ye(){var e=Pe.U.read().motion;return(0,i.jsx)(e.div,{className:Ie,variants:Fe,initial:"rest",whileHover:"hover",whileTap:"pressed",children:(0,i.jsx)(e.div,{className:"flexCenter",variants:He,children:(0,i.jsx)(Oe.Z,{size:16})})})}var ze=(0,k.$j)((function(e,n){var r=n.proxies,t=n.name,i=(0,l.sU)(e),s=(0,u.sj)(e),a=(0,l.VR)(e);return{apiConfig:(0,l.Y$)(e),proxies:r,delay:s,hideUnavailableProxies:i,proxySortBy:(0,l.S3)(e),isOpen:a["proxyProvider:"+t]}}))((function(e){var n=e.name,r=e.proxies,s=e.delay,a=e.hideUnavailableProxies,c=e.proxySortBy,l=e.vehicleType,p=e.updatedAt,f=e.isOpen,x=e.dispatch,h=e.apiConfig,v=K(r,s,a,c),m=We(!1),j=(0,t.Z)(m,2),y=j[0],C=j[1],g=qe((function(){return x((0,u.kL)(h,n))}),[h,x,n]),b=qe((0,D.Z)(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,x((0,u.IA)(h,n));case 3:C(!1);case 4:case"end":return e.stop()}}),e)}))),[h,x,n,C]),w=(0,k.WX)().app.updateCollapsibleIsOpen,_=qe((function(){w("proxyProvider",n,!f)}),[f,w,n]),N=(0,Se.Z)(new Date(p),new Date);return(0,i.jsxs)("div",{className:Ve,children:[(0,i.jsx)(q,{name:n,toggle:_,type:l,isOpen:f,qty:v.length}),(0,i.jsx)("div",{className:Te,children:(0,i.jsxs)("small",{children:["Updated ",N," ago"]})}),(0,i.jsxs)(Ee,{isOpen:f,children:[(0,i.jsx)(Ce,{all:v}),(0,i.jsxs)("div",{className:$e,children:[(0,i.jsx)(d.Z,{text:"Update",start:(0,i.jsx)(Ye,{}),onClick:g}),(0,i.jsx)(d.Z,{text:"Health Check",start:(0,i.jsx)(o.Z,{size:16}),onClick:b,isLoading:y})]})]}),(0,i.jsx)(Ee,{isOpen:!f,children:(0,i.jsx)(ge,{all:v})})]})}));function Ge(e){var n=e.items;return 0===n.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{title:"Proxy Provider"}),(0,i.jsx)("div",{children:n.map((function(e){return(0,i.jsx)(ze,{name:e.name,proxies:e.proxies,type:e.type,vehicleType:e.vehicleType,updatedAt:e.updatedAt},e.name)}))})]})}var Ke=r(37100),Xe=r(26512),Je="_1tkxMBL44k",Qe=[["Natural","order_natural"],["LatencyAsc","order_latency_asc"],["LatencyDesc","order_latency_desc"],["NameAsc","order_name_asc"],["NameDesc","order_name_desc"]],en=a.useCallback;var nn=(0,k.$j)((function(e){return{appConfig:{proxySortBy:(0,l.S3)(e),hideUnavailableProxies:(0,l.sU)(e),autoCloseOldConns:(0,l.xE)(e)}}}))((function(e){var n=e.appConfig,r=(0,k.WX)().app.updateAppConfig,t=en((function(e){r("proxySortBy",e.target.value)}),[r]),s=en((function(e){r("hideUnavailableProxies",e)}),[r]),a=(0,c.$)().t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:Je,children:[(0,i.jsx)("span",{children:a("sort_in_grp")}),(0,i.jsx)("div",{children:(0,i.jsx)(Ke.Z,{options:Qe.map((function(e){return[e[0],a(e[1])]})),selected:n.proxySortBy,onChange:t})})]}),(0,i.jsx)("hr",{}),(0,i.jsxs)("div",{className:Je,children:[(0,i.jsx)("span",{children:a("hide_unavail_proxies")}),(0,i.jsx)("div",{children:(0,i.jsx)(Xe.Z,{name:"hideUnavailableProxies",checked:n.hideUnavailableProxies,onChange:s})})]}),(0,i.jsxs)("div",{className:Je,children:[(0,i.jsx)("span",{children:a("auto_close_conns")}),(0,i.jsx)("div",{children:(0,i.jsx)(Xe.Z,{name:"autoCloseOldConns",checked:n.autoCloseOldConns,onChange:function(e){return r("autoCloseOldConns",e)}})})]})]})})),rn=r(44774),tn=r(57944);function sn(){var e=(0,rn.g)(u.RE),n=(0,t.Z)(e,2),r=n[0],s=n[1];return(0,i.jsx)("input",{className:tn.Z.input,type:"text",value:s,onChange:r})}var an=a.useState,on=a.useEffect,cn=a.useCallback,ln=a.useRef;var un=(0,k.$j)((function(e){return{apiConfig:(0,l.Y$)(e),groupNames:(0,u.P_)(e),proxyProviders:(0,u.a)(e),delay:(0,u.sj)(e),showModalClosePrevConns:(0,u.DP)(e)}}))((function(e){var n=e.dispatch,r=e.groupNames,a=e.delay,l=e.proxyProviders,f=e.apiConfig,x=e.showModalClosePrevConns,h=ln({}),v=an(!1),m=(0,t.Z)(v,2),j=m[0],y=m[1],C=cn((function(){j||(y(!0),n((0,u.$3)(f)).then((function(){return y(!1)}),(function(){return y(!1)})))}),[f,n,j]),_=cn((function(){h.current.startAt=Date.now(),n((0,u.Ry)(f)).then((function(){h.current.completeAt=Date.now()}))}),[f,n]);on((function(){_();var e=function(){h.current.startAt&&Date.now()-h.current.startAt>3e4&&_()};return window.addEventListener("focus",e,!1),function(){return window.removeEventListener("focus",e,!1)}}),[_]);var N=an(!1),Z=(0,t.Z)(N,2),S=Z[0],B=Z[1],M=cn((function(){B(!1)}),[]),D=(0,k.WX)().proxies,R=D.closeModalClosePrevConns,E=D.closePrevConnsAndTheModal,T=(0,c.$)().t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g,{isOpen:S,onRequestClose:M,children:(0,i.jsx)(nn,{})}),(0,i.jsxs)("div",{className:P,children:[(0,i.jsx)(p.Z,{title:T("Proxies")}),(0,i.jsxs)("div",{className:U,children:[(0,i.jsx)("div",{className:L,children:(0,i.jsx)(sn,{})}),(0,i.jsx)(s.ZP,{label:T("settings"),children:(0,i.jsx)(d.Z,{kind:"minimal",onClick:function(){return B(!0)},children:(0,i.jsx)(w,{size:16})})})]})]}),(0,i.jsx)("div",{children:r.map((function(e){return(0,i.jsx)("div",{className:A,children:(0,i.jsx)(Ze,{name:e,delay:a,apiConfig:f,dispatch:n})},e)}))}),(0,i.jsx)(Ge,{items:l}),(0,i.jsx)("div",{style:{height:60}}),(0,i.jsx)(b.Lg,{icon:j?(0,i.jsx)(b.$4,{children:(0,i.jsx)(o.Z,{width:16,height:16})}):(0,i.jsx)(o.Z,{width:16,height:16}),onClick:C,text:T("Test Latency"),style:b.FK}),(0,i.jsx)(g,{isOpen:x,onRequestClose:R,children:(0,i.jsx)(O,{onClickPrimaryButton:function(){return E(f)},onClickSecondaryButton:R})})]})}))},51525:function(e,n,r){"use strict";r.d(n,{aU:function(){return i.Action},Lg:function(){return i.Fab},$4:function(){return a},FK:function(){return o}});var t=r(85893),i=(r(67294),r(66018)),s="_3nmqcBZJL5";function a(e){var n=e.children;return(0,t.jsx)("span",{className:s,children:n})}var o={right:10,bottom:10}},37100:function(e,n,r){"use strict";r.d(n,{Z:function(){return a}});r(21249);var t=r(34699),i=r(85893),s=(r(67294),"_2epoA7G8CQ");function a(e){var n=e.options,r=e.selected,a=e.onChange;return(0,i.jsx)("select",{className:s,value:r,onChange:a,children:n.map((function(e){var n=(0,t.Z)(e,2),r=n[0],s=n[1];return(0,i.jsx)("option",{value:r,children:s},r)}))})}},44774:function(e,n,r){"use strict";r.d(n,{g:function(){return u}});var t=r(34699),i=r(80125),s=r(67294),a=r(2804),o=s.useCallback,c=s.useState,l=s.useMemo;function u(e){var n=(0,a.FV)(e),r=(0,t.Z)(n,2)[1],s=c(""),u=(0,t.Z)(s,2),d=u[0],p=u[1],f=l((function(){return(0,i.Z)(r,300)}),[r]);return[o((function(e){p(e.target.value),f(e.target.value)}),[f]),d]}},57944:function(e,n){"use strict";n.Z={input:"_1I0EXOg8Vu"}}}]);
//# sourceMappingURL=proxies.02e23334644f68b33902.js.map