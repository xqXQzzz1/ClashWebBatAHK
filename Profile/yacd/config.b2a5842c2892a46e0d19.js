(self.webpackChunkyacd=self.webpackChunkyacd||[]).push([[497],{9546:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return X}});r(21249),r(47042);var t=r(96156),a=r(34699),l=r(85893),s=r(67294),i=r(64478),c=r(37100),o=r(6055),u=r(92669),d=r(81125),p=r(25904),f="_2drigWG08z",v="_3qy5-MPwaw",j="_1sbDIR8sCY",b="_1Hvw0QbyvH",h="_1L2FFnIs31",y=r(82569),g=r(68970),x=r(86010),O="_1-_dHqCZpQ",m="_3r9QGmDKef",w="_3iVnjLFlaM";function P(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function C(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?P(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function k(e){var n=e.OptionComponent,r=e.optionPropsList,t=e.selectedIndex,a=e.onChange,s=(0,x.Z)("visually-hidden",m),i=function(e){a(e.target.value)};return(0,l.jsx)("fieldset",{className:O,children:r.map((function(e,r){return(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",checked:t===r,name:"selection",value:r,"aria-labelledby":"traffic chart type "+r,onChange:i,className:s}),(0,l.jsx)("div",{className:w,children:(0,l.jsx)(n,C({},e))})]},r)}))})}var N=r(85295),D=r(26512),Z=r(97148),E=r(66728),S=r(35227);function _(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?_(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var A={legend:{display:!1},scales:{xAxes:[{display:!1}],yAxes:[{display:!1}]}},L=[23e3,35e3,46e3,33e3,9e4,68e3,23e3,45e3],M=[184e3,183e3,196e3,182e3,19e4,186e3,182e3,189e3],T=L;function G(e){var n=e.id,r=S.A8.read(),t=(0,s.useMemo)((function(){return{labels:T,datasets:[I(I(I({},S.IE),S.Eu[n].up),{},{data:L}),I(I(I({},S.IE),S.Eu[n].down),{},{data:M})]}}),[n]),a="chart-"+n;return(0,E.Z)(r,a,t,null,A),(0,l.jsx)("div",{style:{width:130,padding:5},children:(0,l.jsx)("canvas",{id:a})})}function R(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function U(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?R(Object(r),!0).forEach((function(n){(0,t.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var $=s.useEffect,H=s.useState,Q=s.useCallback,B=s.useRef,F=s.useMemo,W=[{id:0},{id:1},{id:2},{id:3}],Y=[{label:"Global",value:"Global"},{label:"Rule",value:"Rule"},{label:"Direct",value:"Direct"}],q=[{label:"Debug",value:"debug"},{label:"Warning",value:"warning"},{label:"Info",value:"info"},{label:"Error",value:"error"},{label:"Silent",value:"silent"}],z=[{key:"port",label:"HTTP Proxy Port"},{key:"socks-port",label:"SOCKS5 Proxy Port"},{key:"mixed-port",label:"Mixed Port"},{key:"redir-port",label:"Redir Port"}],K=[["zh","中文"],["en","English"]],V=(0,N.$j)((function(e){return{selectedChartStyleIndex:(0,o.AM)(e),latencyTestUrl:(0,o.Bg)(e),apiConfig:(0,o.Y$)(e)}}))((function(e){var n=e.dispatch,r=e.configs,t=e.selectedChartStyleIndex,s=e.latencyTestUrl,o=e.apiConfig,x=H(r),O=(0,a.Z)(x,2),m=O[0],w=O[1],P=B(r);$((function(){P.current!==r&&w(r),P.current=r}),[r]);var C=Q((function(){n((0,d.h7)("apiConfig"))}),[n]),E=Q((function(e,n){w(U(U({},m),{},{[e]:n}))}),[m]),S=Q((function(e){var r=e;E("allow-lan",r),n((0,u.wf)(o,{"allow-lan":r}))}),[o,n,E]),_=Q((function(e){var r=e.target,t=r.name,a=r.value;switch(r.name){case"mode":case"log-level":E(t,a),n((0,u.wf)(o,{[t]:a}));break;case"redir-port":case"socks-port":case"mixed-port":case"port":if(""!==r.value){var l=parseInt(r.value,10);if(l<0||l>65535)return}E(t,a);break;default:return}}),[o,n,E]),I=(0,N.WX)(),A=I.selectChartStyleIndex,L=I.updateAppConfig,M=Q((function(e){var r=e.target,t=r.name,a=r.value;switch(t){case"port":case"socks-port":case"mixed-port":case"redir-port":var l=parseInt(a,10);if(l<0||l>65535)return;n((0,u.wf)(o,{[t]:l}));break;case"latencyTestUrl":L(t,a);break;default:throw new Error("unknown input name "+t)}}),[o,n,L]),T=F((function(){var e=m.mode;return"string"==typeof e&&e[0].toUpperCase()+e.slice(1)}),[m.mode]),R=(0,i.$)(),V=R.t,X=R.i18n;return(0,l.jsxs)("div",{children:[(0,l.jsx)(y.Z,{title:V("Config")}),(0,l.jsxs)("div",{className:f,children:[z.map((function(e){return void 0!==m[e.key]?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:e.label}),(0,l.jsx)(g.Z,{name:e.key,value:m[e.key],onChange:_,onBlur:M})]},e.key):null})),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:"Allow LAN"}),(0,l.jsx)(D.Z,{name:"allow-lan",checked:m["allow-lan"],onChange:S})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:"Mode"}),(0,l.jsx)(Z.Z,{options:Y,name:"mode",value:T,onChange:_})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:"Log Level"}),(0,l.jsx)(Z.Z,{options:q,name:"log-level",value:m["log-level"],onChange:_})]})]}),(0,l.jsx)("div",{className:j,children:(0,l.jsx)("div",{})}),(0,l.jsxs)("div",{className:v,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:V("chart_style")}),(0,l.jsx)(k,{OptionComponent:G,optionPropsList:W,selectedIndex:t,onChange:A})]}),(0,l.jsxs)("div",{className:h,children:[(0,l.jsx)("div",{className:b,children:V("latency_test_url")}),(0,l.jsx)(g.N,{name:"latencyTestUrl",type:"text",value:s,onBlur:M})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:"Action"}),(0,l.jsx)(p.Z,{label:"Switch backend",onClick:C})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:b,children:V("lang")}),(0,l.jsx)("div",{className:h,children:(0,l.jsx)(c.Z,{options:K,selected:X.language,onChange:function(e){return X.changeLanguage(e.target.value)}})})]})]})]})})),X=(0,N.$j)((function(e){return{configs:(0,u.G_)(e),apiConfig:(0,o.Y$)(e)}}))((function(e){var n=e.dispatch,r=e.configs,t=e.apiConfig;return $((function(){n((0,u.Tj)(t))}),[n,t]),(0,l.jsx)(V,{configs:r})}))},37100:function(e,n,r){"use strict";r.d(n,{Z:function(){return s}});r(21249);var t=r(34699),a=r(85893),l=(r(67294),"_2epoA7G8CQ");function s(e){var n=e.options,r=e.selected,s=e.onChange;return(0,a.jsx)("select",{className:l,value:r,onChange:s,children:n.map((function(e){var n=(0,t.Z)(e,2),r=n[0],l=n[1];return(0,a.jsx)("option",{value:r,children:l},r)}))})}}}]);
//# sourceMappingURL=config.b2a5842c2892a46e0d19.js.map